<div class="min-h-screen bg-card relative overflow-hidden screen-bottom-left-gradient screen-bottom-right-gradient">
  <!-- Centered content -->
  <div class="grid place-items-center min-h-screen relative z-10" [@animate]="{value:'*',params:{y:'40px',opacity:'0',delay:'100ms', duration: '400ms'}}">
    <div class="flex flex-col items-center p-8">
      <div class="flex items-center gap-2 mb-8">
        <mat-icon class="text-primary !text-[36px] !w-9 !h-9">cloud</mat-icon>
        <span class="text-2xl font-bold text-primary">CloudFiles</span>
      </div>

      <div class="w-full max-w-md">
        <!-- Login Mode -->
        <ng-container *ngIf="mode === 'login'">
          <h2 class="text-xl font-medium text-center mb-2">Welcome Back</h2>
          <p class="text-secondary text-center mb-8">Sign in to access your cloud files.</p>

          <!-- OAuth buttons -->
          <div class="flex flex-col gap-3 mb-6">
            <button mat-stroked-button (click)="loginWithGoogle()" [disabled]="loading"
              class="!py-3 !rounded-lg !border-gray-300 !text-base">
              <mat-icon svgIcon="eg_google" class="mr-2"></mat-icon>
              Sign in with Google
            </button>
            <button mat-stroked-button (click)="loginWithAzure()" [disabled]="loading"
              class="!py-3 !rounded-lg !border-gray-300 !text-base">
              <mat-icon class="mr-2 text-blue-600">business</mat-icon>
              Sign in with Azure
            </button>
          </div>

          <!-- Divider -->
          <div class="flex items-center gap-4 mb-6">
            <div class="flex-1 border-t border-gray-200"></div>
            <span class="text-sm text-secondary">or</span>
            <div class="flex-1 border-t border-gray-200"></div>
          </div>

          <!-- Local login form -->
          <div class="flex flex-col gap-4">
            <mat-form-field appearance="outline" subscriptSizing="dynamic">
              <mat-label>Email</mat-label>
              <input matInput type="email" [(ngModel)]="loginEmail" (keyup.enter)="loginLocal()" [disabled]="loading" />
            </mat-form-field>

            <mat-form-field appearance="outline" subscriptSizing="dynamic">
              <mat-label>Password</mat-label>
              <input matInput type="password" [(ngModel)]="loginPassword" (keyup.enter)="loginLocal()" [disabled]="loading" />
            </mat-form-field>

            <!-- Error message -->
            <div *ngIf="error" class="text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg p-3">
              {{ error }}
            </div>

            <button mat-flat-button color="primary" (click)="loginLocal()" [disabled]="loading" class="!py-3 !text-base">
              <mat-spinner *ngIf="loading" diameter="20" class="mr-2 inline-block"></mat-spinner>
              Sign In
            </button>
          </div>

          <p class="text-sm text-center mt-6 text-secondary">
            Don't have an account?
            <a (click)="switchMode('register')" class="text-primary font-medium cursor-pointer hover:underline">Register</a>
          </p>
        </ng-container>

        <!-- Register Mode -->
        <ng-container *ngIf="mode === 'register'">
          <h2 class="text-xl font-medium text-center mb-2">Create Account</h2>
          <p class="text-secondary text-center mb-8">Register to start using CloudFiles.</p>

          <div class="flex flex-col gap-4">
            <mat-form-field appearance="outline" subscriptSizing="dynamic">
              <mat-label>Email</mat-label>
              <input matInput type="email" [(ngModel)]="registerEmail" [disabled]="loading" />
            </mat-form-field>

            <mat-form-field appearance="outline" subscriptSizing="dynamic">
              <mat-label>Display Name</mat-label>
              <input matInput type="text" [(ngModel)]="registerDisplayName" [disabled]="loading" />
            </mat-form-field>

            <mat-form-field appearance="outline" subscriptSizing="dynamic">
              <mat-label>Password</mat-label>
              <input matInput type="password" [(ngModel)]="registerPassword" [disabled]="loading" />
            </mat-form-field>

            <mat-form-field appearance="outline" subscriptSizing="dynamic">
              <mat-label>Confirm Password</mat-label>
              <input matInput type="password" [(ngModel)]="registerConfirmPassword" (keyup.enter)="register()" [disabled]="loading" />
            </mat-form-field>

            <!-- Error message -->
            <div *ngIf="error" class="text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg p-3">
              {{ error }}
            </div>

            <!-- Success message -->
            <div *ngIf="success" class="text-sm text-green-600 bg-green-50 border border-green-200 rounded-lg p-3">
              {{ success }}
            </div>

            <button mat-flat-button color="primary" (click)="register()" [disabled]="loading" class="!py-3 !text-base">
              <mat-spinner *ngIf="loading" diameter="20" class="mr-2 inline-block"></mat-spinner>
              Create Account
            </button>
          </div>

          <p class="text-sm text-center mt-6 text-secondary">
            Already have an account?
            <a (click)="switchMode('login')" class="text-primary font-medium cursor-pointer hover:underline">Sign In</a>
          </p>
        </ng-container>
      </div>
    </div>
  </div>

  <!-- Right Column (decorative, desktop only) -->
  <div class="hidden lg:flex absolute right-0 top-0 bottom-0 w-1/2 p-8 z-0">
    <div class="flex flex-col justify-center items-center max-w-lg mx-auto">
      <mat-icon class="text-primary mb-6 !text-[120px] !w-[120px] !h-[120px]">cloud_queue</mat-icon>
      <h1 class="font-medium text-2xl leading-tight text-center mb-4">
        Browse your cloud files from
        <span class="text-primary font-bold">one place</span>
      </h1>
      <p class="text-secondary text-center">
        Connect Google and Azure accounts to browse, preview, and manage your files across cloud providers.
      </p>
    </div>
  </div>

  <!-- Footer -->
  <footer class="absolute bottom-0 left-0 right-0 px-6 py-3 flex items-center justify-center gap-4 text-xs text-gray-400 z-10">
    <span>&copy; 2026 CloudFiles</span>
    <span>&middot;</span>
    <a routerLink="/privacy" class="hover:text-gray-600 no-underline text-gray-400">Privacy Policy</a>
    <span>&middot;</span>
    <a routerLink="/terms" class="hover:text-gray-600 no-underline text-gray-400">Terms of Service</a>
  </footer>
</div>
